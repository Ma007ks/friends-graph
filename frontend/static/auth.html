<html>
    <head>
        <script src="https://vk.com/js/api/openapi.js?162" type="text/javascript"></script>
    </head>
<body>
    <button id="login_btn" type="button">Войти в вк</button>
    <button id="status_btn" type="button">Войти в вк</button>
    <script>
        VK.init({
            apiId: 7154329
        });
        login_btn.onclick = () => {
            let popup = window.open("https://oauth.vk.com/authorize?client_id=7154329&display=popup&redirect_uri=close.html&scope=friends&response_type=code&v=5.101", 'test', "height=200,width=200");
            var timer = setInterval(function() {   
                if(popup.closed) {  
                    clearInterval(timer);  
                    window.location.href = '/';  
                }  
            }, 1000); 
        };
        status_btn.onclick = () => {
            VK.Auth.getLoginStatus(function(response) {
            alert(response);
            if (response.session) {
                /* Пользователь успешно авторизовался */
                if (response.settings) {
                /* Выбранные настройки доступа пользователя, если они были запрошены */
                }
            } else {
                /* Пользователь нажал кнопку Отмена в окне авторизации */
            }
        });
        };
    </script>
</body>
</html>